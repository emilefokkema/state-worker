(()=>{var e={369:(e,t,s)=>{const{req:r}=s(281);e.exports={NodeMethodImporter:class{importMethods(e){return Promise.resolve(r(e.path))}}}},563:(e,t,s)=>{const{parentPort:r}=s(837);e.exports={NodeParentProcess:class{sendMessage(e){r.postMessage(e)}addMessageEventListener(e){r.addListener("message",e)}removeMessageEventListener(e){r.removeListener("message",e)}}}},281:e=>{"use strict";e.exports=require("./req")},837:e=>{"use strict";e.exports=require("worker_threads")}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,s),i.exports}(()=>{"use strict";var e,t=s(369),r=s(563);class n{constructor(e){this.process=e}addListener(e){this.process.addMessageEventListener(e)}removeListener(e){this.process.removeMessageEventListener(e)}}class i extends class{constructor(){this.listeners=[]}addListener(e){this.listeners.push(e)}removeListener(e){const t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}dispatch(...e){const t=this.listeners.slice();for(let s of t)s(...e)}}{constructor(){super(),this.cancelled=!1}cancel(){this.dispatch()}dispatch(){this.cancelled||(super.dispatch(),this.cancelled=!0,this.listeners.splice(0,this.listeners.length))}addListener(e){this.cancelled?e():super.addListener(e)}}class o{constructor(e,t){this.eventSource=e,this.mapFn=t,this.listeners=[]}addListener(e){const t={cancellationToken:new i},s=this.mapFn.apply(t,[e]);t.listener=e,t.mappedListener=s,this.listeners.push(t),this.eventSource.addListener(s)}removeListener(e){const t=this.listeners.findIndex((t=>t.listener===e));if(-1===t)return;const[s]=this.listeners.splice(t,1);this.eventSource.removeListener(s.mappedListener),s.cancellationToken.cancel()}}function a(e,t){return new o(e,t)}function c(e,t){return t?a(e,(e=>(...s)=>{t(...s)&&e(...s)})):e}class d{constructor(e){this.process=e,this.processRequestMessage=a(c(new n(e),(({type:e})=>"request"===e)),(e=>({requestId:t,request:s})=>{e(s,(e=>{this.process.sendMessage({type:"response",requestId:t,response:e})}))}))}addListener(e){this.processRequestMessage.addListener(e)}removeListener(e){this.processRequestMessage.removeListener(e)}}class u{constructor(e){this.eventSource=e}addListener(e,t){this.eventSource.addListener(e),t&&t.addListener((()=>{this.removeListener(e)}))}removeListener(e){this.eventSource.removeListener(e)}}class p{constructor(e){this.process=e,this.processResponseMessage=c(new n(e),(({type:e})=>"response"===e)),this.latestRequestId=0}async getResponse(e){const t=this.latestRequestId++,s=(r=c(this.processResponseMessage,(({requestId:e})=>e===t)),n&&(r=function(e){return new u(e)}(r)),new Promise((e=>{const t=(...s)=>{r.removeListener(t),e(s)};r.addListener(t,n)})));var r,n;this.process.sendMessage({type:"request",requestId:t,request:e});const[{response:i}]=await s;return i}}!function(e,t){let s,r,n;t.onInitializationRequested.addListener((async({config:t,baseURI:i,state:o},a)=>{try{if(({commands:s,queries:r}=await e.importMethods(t,i)),s=s||{},r=r||{},"object"!=typeof s)return void a({error:"Exported member 'commands' is not an object"});if("object"!=typeof r)return void a({error:"Exported member 'queries' is not an object"});const c=Object.getOwnPropertyNames(r),d=Object.getOwnPropertyNames(s);if(c.includes("terminate")||d.includes("terminate"))return void a({error:"'terminate' cannot be used as the name of a command or a query"});n=o,a({methodCollection:{queries:c,commands:d}})}catch(e){a({error:e.toString()})}})),t.onSetStateRequested.addListener((({state:e},t)=>{n=e,t()})),t.onExecutionRequested.addListener((({methodName:e,args:i,id:o},a)=>{const c=r[e],d=s[e],u=d||c,p=u===d,h=function(e){return{state:n,async await(s){if(!(s instanceof Promise))return s;let r,n;t.notifyIdle();try{r=await s}catch(e){n=e}if(await t.requestIdle(e),void 0!==n)throw n;return r}}}(o);try{const e=u.apply(h,i);if(n=h.state,e instanceof Promise)e.then((e=>{n=h.state;const t={result:e};p&&(t.state=n),a(t)})).catch((e=>{n=h.state;const t={error:e.toString()};p&&(t.state=n),a(t)}));else{const t={result:e};p&&(t.state=n),a(t)}}catch(e){n=h.state;const t={error:e.toString()};p&&(t.state=n),a(t)}})),t.notifyStarted()}(new t.NodeMethodImporter,(e=new r.NodeParentProcess,new class{constructor(e){this.parentProcess=e;const t=new d(e);this.onExecutionRequested=c(t,(({type:e})=>"execution"===e)),this.onSetStateRequested=c(t,(({type:e})=>"setState"===e)),this.onInitializationRequested=c(t,(({type:e})=>"initialize"===e)),this.requestTarget=new p(e)}notifyStarted(){this.parentProcess.sendMessage({type:"started"})}notifyIdle(){this.parentProcess.sendMessage({type:"idle"})}requestIdle(e){return this.requestTarget.getResponse({type:"requestIdle",executionId:e})}}(e)))})()})();